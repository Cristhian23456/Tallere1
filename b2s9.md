# Taller Individual  3
## Reactive Stream

**Semana**: 9

**Objetivos**:

- Aplicar los conocimientos sobre Reactive Stream.
- Generar y procesar flujos de datos reactivos.



### DescripciÃ³n:

Resuelva los siguientes problemas.

### Problema 1
**SincronizaciÃ³n de Sensores**

DescripciÃ³n: Simula dos sensores que emiten valores periÃ³dicos:

- Sensor1: Rango [20Â°C, 30Â°C], cada 1 segundo.
- Sensor2: Rango [30Â°C, 40Â°C], cada 1.5 segundos.
- Usa zip para combinar los valores de ambos sensores en un solo flujo.
- DetÃ©n el flujo despuÃ©s de 10 pares de valores.
- Genera una alerta si la diferencia absoluta entre las lecturas de Sensor1 y Sensor2 es mayor a 5Â°C.
  

```mathematica
Sensor1: 22Â°C, Sensor2: 27Â°C, Difference: 5Â°C
Sensor1: 24Â°C, Sensor2: 34Â°C, Difference: 10Â°C
ðŸš¨ ALERT! Significant difference detected: 10Â°C
```
#### SoluciÃ³n 
```scala
import rx.lang.scala.Observable
import scala.util.Random
import scala.concurrent.duration._

object Sincronizacion_Sensores {
  val sensor1 = Observable.interval(1.second).map(_ => Random.between(20, 30))
  val sensor2 = Observable.interval(1.5.second).map(_ => Random.between(30, 40))

  // Combinar los flujos con zip
  sensor1.zip(sensor2)
    .take(10)
    .subscribe(
      onNext = {
        case (temp1, temp2) =>
          val diff= math.abs(temp1-temp2)
          println(s"Sensor1: $temp1Â°C, Sensor2: $temp2Â°C, Diferencia: $diff")
          if (diff > 5) {
            println(s" -> ðŸš¨ ALERT! Significant difference  detected:: $diffÂ°C")
          } else {
            println("")
          }
      },
      onError = e => println(s"Error: ${e.getMessage}"),
      onCompleted = () => println("Stream completed!")
    )

  // Mantener la aplicaciÃ³n corriendo
  Thread.sleep(16000)
}
```

```yaml
Sensor1: 22Â°C, Sensor2: 39Â°C, Diferencia: 17
 -> ðŸš¨ ALERT! Significant difference: 17Â°C
Sensor1: 28Â°C, Sensor2: 33Â°C, Diferencia: 5

Sensor1: 28Â°C, Sensor2: 35Â°C, Diferencia: 7
 -> ðŸš¨ ALERT! Significant difference: 7Â°C
Sensor1: 25Â°C, Sensor2: 34Â°C, Diferencia: 9
 -> ðŸš¨ ALERT! Significant difference: 9Â°C
Sensor1: 22Â°C, Sensor2: 33Â°C, Diferencia: 11
 -> ðŸš¨ ALERT! Significant difference: 11Â°C
Sensor1: 22Â°C, Sensor2: 31Â°C, Diferencia: 9
 -> ðŸš¨ ALERT! Significant difference: 9Â°C
Sensor1: 27Â°C, Sensor2: 35Â°C, Diferencia: 8
 -> ðŸš¨ ALERT! Significant difference: 8Â°C
Sensor1: 22Â°C, Sensor2: 32Â°C, Diferencia: 10
 -> ðŸš¨ ALERT! Significant difference: 10Â°C
Sensor1: 23Â°C, Sensor2: 36Â°C, Diferencia: 13
 -> ðŸš¨ ALERT! Significant difference: 13Â°C
Sensor1: 24Â°C, Sensor2: 32Â°C, Diferencia: 8
 -> ðŸš¨ ALERT! Significant difference: 8Â°C
Completado

Process finished with exit code 0

```

### Problema 2
**Sistema de Alerta Complejo**

DescripciÃ³n: Simula tres sensores que emiten datos periÃ³dicos:

- Sensor1: Temperatura (20Â°C a 30Â°C).
- Sensor2: Humedad (40% a 60%).
- Sensor3: PresiÃ³n (950 hPa a 1050 hPa).
- Combina los datos de los tres sensores y detecta si alguna de las mÃ©tricas estÃ¡ fuera de rango.
- DetÃ©n el flujo despuÃ©s de 20 combinaciones.

```yaml
Temperature: 22Â°C, Humidity: 50%, Pressure: 970 hPa
Temperature: 25Â°C, Humidity: 42%, Pressure: 1055 hPa
ðŸš¨ ALERT! Pressure out of range: 1055 hPa
...
```
#### SoluciÃ³n 
```scala
import rx.lang.scala.Observable
import scala.util.Random
import scala.concurrent.duration._

object Alerta_Complejo {
  val sensor1 = Observable.interval(500.millis).map(_ => Random.between(20, 30))
  val sensor2 = Observable.interval(500.millis).map(_ => Random.between(40, 60))
  val sensorPres = Observable.interval(500.millis).map(_ => Random.between(950, 1051))


  sensor1.zip(sensor2).zip(sensorPres)
    .take(20)
    .subscribe(
      onNext = {
        case ((sensor1, sensor2), sensorPres) =>
          print(s"Temp: $sensor1Â°C, Hum: $sensor2%, Pres: $sensorPres hPa")

          val tOut = sensor1 < 20 || sensor1 > 30
          val hOut = sensor2 < 40 || sensor2 > 60
          val pOut = sensorPres < 950 || sensorPres > 1050

          if (tOut || hOut || pOut) {
            print(" -> ðŸš¨ ALERT! Out of range: ")
            if (tOut) print(s"[Temp $sensor1] ")
            if (hOut) print(s"[Hum $sensor2] ")
            if (pOut) print(s"[Pres $sensorPres] ")
            println("")
          } else {
            println(" OK")
          }
      },
      onError = e => println(s"Error: ${e.getMessage}"),
      onCompleted = () => println("--- Monitoreo finalizado ---")
    )
  Thread.sleep(11000)
}
```

##### Resultado
```yaml
Temp: 22Â°C, Hum: 49%, Pres: 967 hPa OK
Temp: 27Â°C, Hum: 44%, Pres: 976 hPa OK
Temp: 26Â°C, Hum: 45%, Pres: 1004 hPa OK
Temp: 20Â°C, Hum: 59%, Pres: 997 hPa OK
Temp: 26Â°C, Hum: 48%, Pres: 960 hPa OK
Temp: 26Â°C, Hum: 59%, Pres: 980 hPa OK
Temp: 26Â°C, Hum: 58%, Pres: 1050 hPa OK
Temp: 25Â°C, Hum: 50%, Pres: 1020 hPa OK
Temp: 25Â°C, Hum: 42%, Pres: 961 hPa OK
Temp: 29Â°C, Hum: 47%, Pres: 1009 hPa OK
Temp: 25Â°C, Hum: 45%, Pres: 957 hPa OK
Temp: 21Â°C, Hum: 50%, Pres: 1015 hPa OK
Temp: 21Â°C, Hum: 58%, Pres: 1044 hPa OK
Temp: 21Â°C, Hum: 45%, Pres: 952 hPa OK
Temp: 26Â°C, Hum: 40%, Pres: 1039 hPa OK
Temp: 21Â°C, Hum: 56%, Pres: 973 hPa OK
Temp: 23Â°C, Hum: 46%, Pres: 995 hPa OK
Temp: 26Â°C, Hum: 52%, Pres: 1045 hPa OK
Temp: 22Â°C, Hum: 54%, Pres: 1030 hPa OK
Temp: 28Â°C, Hum: 56%, Pres: 1037 hPa OK
--- Monitoreo finalizado ---

```
### CalificaciÃ³n:

Para la calificaciÃ³n, se debe presentar el trabajo realizado a su tutor. Es necesario recalcar que la presentaciÃ³n se hace una Ãºnica vez, no existe la posibilidad de presentaciones adicionales con correcciones.

- 10 puntos si presenta en el horario de prÃ¡cticas y experimentaciÃ³n.
- 7 puntos presenta en el horario de tutorÃ­a

La hora mÃ¡xima de presentaciÃ³n serÃ¡ las 08h30
